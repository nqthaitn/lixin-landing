<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lixin - Admin Portal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/src/style.css" />

    <!-- Quill Rich Text Editor -->
    <link href="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.snow.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.js"></script>

    <style>
      .tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 2rem;
      }

      .tab-btn {
        background: transparent;
        border: 1px solid var(--glass-border);
        color: var(--text-secondary);
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        cursor: pointer;
        font-family: inherit;
        font-weight: 500;
        transition: var(--transition);
      }

      .tab-btn:hover {
        background: rgba(255, 255, 255, 0.05);
        color: #fff;
      }

      .tab-btn.active {
        background: var(--accent-primary);
        color: #000;
        border-color: var(--accent-primary);
        font-weight: 600;
      }

      .tab-content {
        display: none;
      }

      #tab-news {
        display: block;
      }

      .category-tag {
        background: rgba(234, 179, 8, 0.15);
        color: var(--accent-primary);
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
      }

      /* Language Tabs for Editor */
      .lang-tabs {
        display: flex;
        gap: 0;
        margin-bottom: 0;
      }

      .lang-tab-btn {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--glass-border);
        color: var(--text-secondary);
        padding: 0.5rem 1.25rem;
        cursor: pointer;
        font-family: inherit;
        font-weight: 500;
        font-size: 0.9rem;
        transition: var(--transition);
        border-bottom: none;
        border-radius: 8px 8px 0 0;
      }

      .lang-tab-btn:hover {
        color: #fff;
        background: rgba(255, 255, 255, 0.1);
      }

      .lang-tab-btn.active {
        background: rgba(234, 179, 8, 0.15);
        color: var(--accent-primary);
        border-color: var(--accent-primary);
        font-weight: 600;
      }

      .lang-editor-panel {
        display: none;
        border: 1px solid var(--glass-border);
        border-radius: 0 8px 8px 8px;
        padding: 1.5rem;
        background: rgba(0, 0, 0, 0.2);
      }

      .lang-editor-panel.active {
        display: block;
      }

      /* Quill Dark Theme Override */
      .ql-toolbar.ql-snow {
        background: rgba(255, 255, 255, 0.05) !important;
        border-color: rgba(255, 255, 255, 0.15) !important;
        border-radius: 8px 8px 0 0;
      }

      .ql-toolbar .ql-stroke {
        stroke: #9ca3af !important;
      }

      .ql-toolbar .ql-fill {
        fill: #9ca3af !important;
      }

      .ql-toolbar .ql-picker-label {
        color: #9ca3af !important;
      }

      .ql-toolbar .ql-picker-options {
        background: #1a1b1e !important;
        border-color: rgba(255, 255, 255, 0.1) !important;
      }

      .ql-toolbar .ql-picker-item {
        color: #ccc !important;
      }

      .ql-toolbar button:hover .ql-stroke,
      .ql-toolbar .ql-active .ql-stroke {
        stroke: var(--accent-primary) !important;
      }

      .ql-toolbar button:hover .ql-fill,
      .ql-toolbar .ql-active .ql-fill {
        fill: var(--accent-primary) !important;
      }

      .ql-toolbar button.ql-active {
        color: var(--accent-primary) !important;
      }

      .ql-container.ql-snow {
        background: rgba(0, 0, 0, 0.4) !important;
        border-color: rgba(255, 255, 255, 0.15) !important;
        border-radius: 0 0 8px 8px;
        color: #f3f4f6 !important;
        font-family: 'Outfit', sans-serif !important;
        font-size: 1rem !important;
        min-height: 200px;
      }

      .ql-editor {
        min-height: 200px;
      }

      .ql-editor.ql-blank::before {
        color: #6b7280 !important;
        font-style: normal !important;
      }

      .ql-snow .ql-editor a {
        color: var(--accent-primary) !important;
      }

      .ql-snow .ql-editor h1,
      .ql-snow .ql-editor h2,
      .ql-snow .ql-editor h3 {
        color: #fff !important;
      }

      .ql-snow .ql-editor blockquote {
        border-left: 4px solid var(--accent-primary) !important;
        color: #9ca3af;
      }

      .ql-snow .ql-editor pre.ql-syntax {
        background: #111 !important;
        color: #e5e7eb !important;
        border-radius: 8px;
      }

      .ql-snow .ql-tooltip {
        background: #1a1b1e !important;
        border-color: rgba(255, 255, 255, 0.1) !important;
        color: #fff !important;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5) !important;
      }

      .ql-snow .ql-tooltip input[type='text'] {
        background: rgba(0, 0, 0, 0.3) !important;
        border-color: rgba(255, 255, 255, 0.2) !important;
        color: #fff !important;
      }

      .auth-gate {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--bg-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
      }
      .auth-gate.hidden {
        display: none;
      }
      .auth-card {
        max-width: 400px;
        width: 90%;
        padding: 2.5rem;
      }
      .auth-header {
        text-align: center;
        margin-bottom: 2rem;
      }
      .auth-header h2 {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
      }
      .auth-header p {
        color: var(--text-secondary);
      }

      .dashboard-stats {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1rem;
        margin-bottom: 2rem;
      }
      .stat-card {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1.25rem 1.5rem;
      }
      .stat-card .stat-icon {
        font-size: 2rem;
      }
      .stat-card .stat-num {
        font-size: 1.5rem;
        font-weight: 700;
        display: block;
        color: var(--accent-primary);
      }
      .stat-card .stat-label {
        font-size: 0.85rem;
        color: var(--text-secondary);
      }
      @media (max-width: 768px) {
        .dashboard-stats {
          grid-template-columns: repeat(2, 1fr);
        }
      }
    </style>
  </head>

  <body style="background: var(--bg-primary)">
    <!-- Add this right after <body> -->
    <div id="auth-gate" class="auth-gate hidden">
      <div class="auth-card glass-panel">
        <div class="auth-header">
          <h2>üîê Lixin Admin</h2>
          <p>Sign in to manage your content</p>
        </div>
        <form id="login-form">
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="login-email" placeholder="admin@lixin.vn" required />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required />
          </div>
          <div
            id="login-error"
            style="color: #ef4444; font-size: 0.9rem; margin-bottom: 1rem; display: none"
          ></div>
          <button type="submit" class="btn btn-primary btn-block">Sign In</button>
        </form>
      </div>
    </div>

    <header class="navbar">
      <div class="container navbar-container">
        <a href="/" class="logo">
          <span class="logo-icon">
            <svg width="28" height="28" viewBox="0 0 100 100" fill="none" class="lixin-logo-svg">
              <path d="M15 15 L50 85 L55 75 L30 25 Z" fill="var(--accent-primary)" opacity="0.3" />
              <path d="M25 10 L55 80 L85 10 L70 10 L55 55 L40 10 Z" fill="var(--accent-primary)" />
            </svg>
          </span>
          <span class="logo-text">
            LIXIN
            <span class="highlight">.</span>
            Admin
          </span>
        </a>
        <nav class="nav-links">
          <a href="/">‚Üê Back to Website</a>
          <button
            id="sign-out-btn"
            class="btn btn-outline"
            style="padding: 0.5rem 1rem; font-size: 0.85rem"
          >
            Sign Out
          </button>
        </nav>
      </div>
    </header>

    <main class="container admin-layout">
      <div class="dashboard-stats" id="dashboard-stats">
        <div class="stat-card glass-panel">
          <span class="stat-icon">üìù</span>
          <div>
            <span class="stat-num" id="stat-posts">0</span>
            <span class="stat-label">Posts</span>
          </div>
        </div>
        <div class="stat-card glass-panel">
          <span class="stat-icon">üì©</span>
          <div>
            <span class="stat-num" id="stat-contacts">0</span>
            <span class="stat-label">Contacts</span>
          </div>
        </div>
        <div class="stat-card glass-panel">
          <span class="stat-icon">üÜï</span>
          <div>
            <span class="stat-num" id="stat-new">0</span>
            <span class="stat-label">New Leads</span>
          </div>
        </div>
        <div class="stat-card glass-panel">
          <span class="stat-icon">‚≠ê</span>
          <div>
            <span class="stat-num" id="stat-highlights">0</span>
            <span class="stat-label">Highlights</span>
          </div>
        </div>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <button class="tab-btn active" data-tab="tab-news">üìù News & Posts</button>
        <button class="tab-btn" data-tab="tab-contacts">üì© Contact Requests</button>
      </div>

      <!-- ============================================================ -->
      <!-- TAB: NEWS -->
      <!-- ============================================================ -->
      <div class="tab-content" id="tab-news">
        <div class="admin-header">
          <h2>Manage News & Insights</h2>
          <button class="btn btn-primary" id="toggle-form-btn">+ Post New Article</button>
        </div>

        <!-- Post Form -->
        <div
          class="glass-panel"
          id="post-form-container"
          style="display: none; padding: 2rem; margin-bottom: 3rem"
        >
          <h3>‚úèÔ∏è Create News Post</h3>
          <p style="color: var(--text-secondary); margin-bottom: 2rem">
            Rich text editor with multi-language support. Use the tabs below to write content in
            each language.
          </p>

          <form id="news-form">
            <div
              style="
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 1.5rem;
                margin-bottom: 1.5rem;
              "
            >
              <div class="form-group">
                <label>Author Role</label>
                <select id="news-author" required>
                  <option value="admin">Admin</option>
                  <option value="ai_agent">AI Agent (Automated Insights)</option>
                </select>
              </div>
              <div class="form-group">
                <label>Category</label>
                <select id="news-category">
                  <option value="general">General</option>
                  <option value="tax_update">Tax Update</option>
                  <option value="accounting">Accounting</option>
                  <option value="legal">Legal</option>
                  <option value="ai_insight">AI Insight</option>
                  <option value="company_news">Company News</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label>Cover Image URL</label>
              <input
                type="url"
                id="news-img"
                placeholder="https://..."
                required
                value="https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&q=80&w=800"
              />
            </div>

            <!-- Language Tabs -->
            <div style="margin-bottom: 1.5rem">
              <div class="lang-tabs">
                <button type="button" class="lang-tab-btn active" data-editor-lang="vi">
                  üáªüá≥ Ti·∫øng Vi·ªát
                </button>
                <button type="button" class="lang-tab-btn" data-editor-lang="en">üá¨üáß English</button>
                <button type="button" class="lang-tab-btn" data-editor-lang="zh">üá®üá≥ ‰∏≠Êñá</button>
              </div>

              <!-- Vietnamese Panel -->
              <div class="lang-editor-panel active" id="editor-panel-vi">
                <div class="form-group">
                  <label>Title (Ti√™u ƒë·ªÅ)</label>
                  <input
                    type="text"
                    id="news-title-vi"
                    placeholder="Nh·∫≠p ti√™u ƒë·ªÅ b√†i vi·∫øt..."
                    required
                  />
                </div>
                <div class="form-group">
                  <label>Excerpt (T√≥m t·∫Øt ng·∫Øn)</label>
                  <textarea
                    id="news-excerpt-vi"
                    rows="2"
                    placeholder="M√¥ t·∫£ ng·∫Øn g·ªçn cho b√†i vi·∫øt..."
                    required
                  ></textarea>
                </div>
                <div class="form-group">
                  <label>Full Content (N·ªôi dung ƒë·∫ßy ƒë·ªß)</label>
                  <div id="editor-vi"></div>
                </div>
              </div>

              <!-- English Panel -->
              <div class="lang-editor-panel" id="editor-panel-en">
                <div class="form-group">
                  <label>Title</label>
                  <input
                    type="text"
                    id="news-title-en"
                    placeholder="Enter article title..."
                    required
                  />
                </div>
                <div class="form-group">
                  <label>Excerpt (Short summary)</label>
                  <textarea
                    id="news-excerpt-en"
                    rows="2"
                    placeholder="Brief description of the article..."
                    required
                  ></textarea>
                </div>
                <div class="form-group">
                  <label>Full Content</label>
                  <div id="editor-en"></div>
                </div>
              </div>

              <!-- Chinese Panel -->
              <div class="lang-editor-panel" id="editor-panel-zh">
                <div class="form-group">
                  <label>Title (Ê†áÈ¢ò)</label>
                  <input type="text" id="news-title-zh" placeholder="ËæìÂÖ•ÊñáÁ´†Ê†áÈ¢ò..." required />
                </div>
                <div class="form-group">
                  <label>Excerpt (ÊëòË¶Å)</label>
                  <textarea
                    id="news-excerpt-zh"
                    rows="2"
                    placeholder="ÊñáÁ´†ÁÆÄË¶ÅÊèèËø∞..."
                    required
                  ></textarea>
                </div>
                <div class="form-group">
                  <label>Full Content (ÂÆåÊï¥ÂÜÖÂÆπ)</label>
                  <div id="editor-zh"></div>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label class="checkbox-lbl">
                <input type="checkbox" id="news-highlight" checked />
                ‚≠ê Highlight on Homepage
              </label>
            </div>

            <button type="submit" class="btn btn-primary">üöÄ Publish Post</button>
            <button type="button" class="btn btn-outline" id="cancel-btn">Cancel</button>
          </form>
        </div>

        <!-- Posts Table -->
        <div class="glass-panel" style="padding: 2rem">
          <h3>Published Posts</h3>
          <div style="overflow-x: auto">
            <table>
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Author</th>
                  <th>Title</th>
                  <th>Category</th>
                  <th>Highlight</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="news-table-body"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ============================================================ -->
      <!-- TAB: CONTACTS -->
      <!-- ============================================================ -->
      <div class="tab-content" id="tab-contacts">
        <div class="admin-header">
          <h2>üì© Contact Requests (Leads)</h2>
        </div>
        <div class="glass-panel" style="padding: 2rem">
          <p style="color: var(--text-secondary); margin-bottom: 1.5rem">
            All form submissions from the website are stored here.
          </p>
          <div style="overflow-x: auto">
            <table>
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Name</th>
                  <th>Phone</th>
                  <th>Email</th>
                  <th>Company</th>
                  <th>Service</th>
                  <th>Status</th>
                  <th>Lang</th>
                </tr>
              </thead>
              <tbody id="contacts-table-body"></tbody>
            </table>
          </div>
        </div>
      </div>
    </main>

    <script type="module" src="/src/admin.js"></script>
  </body>
</html>
